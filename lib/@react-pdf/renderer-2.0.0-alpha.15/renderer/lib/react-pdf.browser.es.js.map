{"version":3,"file":"react-pdf.browser.es.js","sources":["../src/propsEqual.js","../src/renderer.js","../src/index.js","../src/dom.js"],"sourcesContent":["/* eslint-disable no-continue */\n\n/**\n * Checks if two sets of props are equal (recursively)\n *\n * @param {Object} props A\n * @param {Object} props B\n * @returns {Boolean} props equals?\n *\n */\nconst propsEqual = (a, b) => {\n  const oldPropsKeys = Object.keys(a);\n  const newPropsKeys = Object.keys(b);\n\n  if (oldPropsKeys.length !== newPropsKeys.length) {\n    return false;\n  }\n\n  for (let i = 0; i < oldPropsKeys.length; i += 1) {\n    const propName = oldPropsKeys[i];\n\n    if (propName === 'render' && !a[propName] !== !b[propName]) {\n      return false;\n    }\n\n    if (propName !== 'children' && a[propName] !== b[propName]) {\n      if (\n        typeof a[propName] === 'object' &&\n        typeof b[propName] === 'object' &&\n        propsEqual(a[propName], b[propName])\n      ) {\n        continue;\n      }\n\n      return false;\n    }\n\n    if (\n      propName === 'children' &&\n      (typeof a[propName] === 'string' || typeof b[propName] === 'string')\n    ) {\n      return a[propName] === b[propName];\n    }\n  }\n\n  return true;\n};\n\nexport default propsEqual;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n\nimport ReactFiberReconciler from 'react-reconciler';\nimport {\n  unstable_scheduleCallback as schedulePassiveEffects,\n  unstable_cancelCallback as cancelPassiveEffects,\n} from 'scheduler';\n\nimport propsEqual from './propsEqual';\n\nconst emptyObject = {};\n\nconst createRenderer = ({ onChange = () => {} }) => {\n  return ReactFiberReconciler({\n    schedulePassiveEffects,\n\n    cancelPassiveEffects,\n\n    supportsMutation: true,\n\n    isPrimaryRenderer: false,\n\n    warnsIfNotActing: false,\n\n    appendInitialChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    createInstance(type, { style, children, ...props }) {\n      return {\n        type,\n        box: {},\n        style: style || {},\n        props: props || {},\n        children: [],\n      };\n    },\n\n    createTextInstance(text, rootContainerInstance) {\n      return { type: 'TEXT_INSTANCE', value: text };\n    },\n\n    finalizeInitialChildren(element, type, props) {\n      return false;\n    },\n\n    getPublicInstance(instance) {\n      return instance;\n    },\n\n    prepareForCommit() {\n      // Noop\n    },\n\n    prepareUpdate(element, type, oldProps, newProps) {\n      return !propsEqual(oldProps, newProps);\n    },\n\n    resetAfterCommit: onChange,\n\n    resetTextContent(element) {\n      // Noop\n    },\n\n    getRootHostContext() {\n      return emptyObject;\n    },\n\n    getChildHostContext() {\n      return emptyObject;\n    },\n\n    shouldSetTextContent(type, props) {\n      return false;\n    },\n\n    now: Date.now,\n\n    useSyncScheduling: true,\n\n    appendChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    appendChildToContainer(parentInstance, child) {\n      if (parentInstance.type === 'ROOT') {\n        parentInstance.document = child;\n      } else {\n        parentInstance.children.push(child);\n      }\n    },\n\n    insertBefore(parentInstance, child, beforeChild) {\n      const index = parentInstance.children.indexOf(beforeChild);\n      if (index !== -1 && child)\n        parentInstance.children.splice(index, 0, child);\n    },\n\n    removeChild(parentInstance, child) {\n      const index = parentInstance.children.indexOf(child);\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    removeChildFromContainer(parentInstance, child) {\n      const index = parentInstance.children.indexOf(child);\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    commitTextUpdate(textInstance, oldText, newText) {\n      textInstance.value = newText;\n    },\n\n    commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n      const { style, ...props } = newProps;\n      instance.props = props;\n      instance.style = style;\n    },\n  });\n};\n\nexport default createRenderer;\n","import BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\n\nimport createRenderer from './renderer';\nimport { version } from '../package.json';\n\nconst fontStore = new FontStore();\n\nconst pdf = ({ initialValue, onChange }) => {\n  const container = { type: 'ROOT', document: null, lang: 'en-US' };\n  const PDFRenderer = createRenderer({ onChange });\n  const mountNode = PDFRenderer.createContainer(container);\n\n  const updateContainer = doc => {\n    PDFRenderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const getLang = () => {\n    const { document } = container\n    return document.props ? document.props.lang : null\n  }\n\n  const render = async () => {\n    const ctx = new PDFDocument({ autoFirstPage: false, lang: getLang() });\n    const layout = await layoutDocument(container.document, fontStore);\n\n    return renderPDF(ctx, layout);\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const instance = await render();\n    const stream = instance.pipe(BlobStream());\n\n    return new Promise((resolve, reject) => {\n      stream.on('finish', () => {\n        try {\n          const blob = stream.toBlob('application/pdf');\n          callOnRender({ blob });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      stream.on('error', reject);\n    });\n  };\n\n  const toBuffer = async () => {\n    callOnRender();\n    return render();\n  };\n\n  const toString = async () => {\n    let result = '';\n    const instance = await render();\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', buffer => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  return {\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: s => s,\n};\n\nexport { version, Font, StyleSheet, pdf };\n","/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React from 'react';\nimport * as primitives from '@react-pdf/primitives';\nimport { pdf, version, Font, StyleSheet } from './index';\n\nconst queue = require('queue');\n\nclass InternalBlobProvider extends React.PureComponent {\n  renderQueue = queue({ autostart: true, concurrency: 1 });\n\n  state = { blob: null, url: null, loading: true, error: null };\n\n  componentDidMount() {\n    this.instance = pdf({ onChange: this.queueDocumentRender });\n    this.instance.updateContainer(this.props.document);\n\n    this.renderQueue.on('error', this.onRenderFailed);\n    this.renderQueue.on('success', this.onRenderSuccessful);\n  }\n\n  componentDidUpdate() {\n    this.instance.updateContainer(this.props.document);\n  }\n\n  componentWillUnmount() {\n    this.renderQueue.end();\n  }\n\n  queueDocumentRender = () => {\n    this.renderQueue.splice(0, this.renderQueue.length, () =>\n      this.state.error ? Promise.resolve() : this.instance.toBlob(),\n    );\n  };\n\n  onRenderFailed = error => {\n    this.setState({ error });\n    console.error(error);\n  };\n\n  onRenderSuccessful = blob => {\n    const oldBlobUrl = this.state.url;\n\n    this.setState(\n      { blob, url: URL.createObjectURL(blob), loading: false },\n      () => URL.revokeObjectURL(oldBlobUrl),\n    );\n  };\n\n  render() {\n    return this.props.children(this.state);\n  }\n}\n\nexport const BlobProvider = ({ document: doc, children }) => {\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return <InternalBlobProvider document={doc}>{children}</InternalBlobProvider>;\n};\n\nexport const PDFViewer = ({\n  className,\n  style,\n  title,\n  children,\n  innerRef,\n  ...props\n}) => {\n  return (\n    <InternalBlobProvider document={children}>\n      {({ url }) => (\n        <iframe\n          src={url}\n          title={title}\n          ref={innerRef}\n          style={style}\n          className={className}\n          {...props}\n        />\n      )}\n    </InternalBlobProvider>\n  );\n};\n\nexport const PDFDownloadLink = ({\n  document: doc,\n  className,\n  style,\n  children,\n  fileName = 'document.pdf',\n}) => {\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  const downloadOnIE = blob => () => {\n    if (window.navigator.msSaveBlob) {\n      window.navigator.msSaveBlob(blob, fileName);\n    }\n  };\n\n  return (\n    <InternalBlobProvider document={doc}>\n      {params => (\n        <a\n          style={style}\n          href={params.url}\n          download={fileName}\n          className={className}\n          onClick={downloadOnIE(params.blob)}\n        >\n          {typeof children === 'function' ? children(params) : children}\n        </a>\n      )}\n    </InternalBlobProvider>\n  );\n};\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const renderToStream = () => {\n  throwEnvironmentError('renderToStream');\n};\n\nexport const renderToString = () => {\n  throwEnvironmentError('renderToString');\n};\n\nexport const renderToFile = () => {\n  throwEnvironmentError('renderToFile');\n};\n\nexport const render = () => {\n  throwEnvironmentError('render');\n};\n\nexport * from './index';\n\nexport * from '@react-pdf/primitives';\n\nexport default {\n  pdf,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n"],"names":["propsEqual","a","b","oldPropsKeys","Object","keys","newPropsKeys","length","i","propName","emptyObject","createRenderer","onChange","ReactFiberReconciler","schedulePassiveEffects","cancelPassiveEffects","supportsMutation","isPrimaryRenderer","warnsIfNotActing","appendInitialChild","parentInstance","child","children","push","createInstance","type","style","props","box","createTextInstance","text","rootContainerInstance","value","finalizeInitialChildren","element","getPublicInstance","instance","prepareForCommit","prepareUpdate","oldProps","newProps","resetAfterCommit","resetTextContent","getRootHostContext","getChildHostContext","shouldSetTextContent","now","Date","useSyncScheduling","appendChild","appendChildToContainer","document","insertBefore","beforeChild","index","indexOf","splice","removeChild","removeChildFromContainer","commitTextUpdate","textInstance","oldText","newText","commitUpdate","updatePayload","fontStore","FontStore","pdf","initialValue","container","lang","PDFRenderer","mountNode","createContainer","updateContainer","doc","getLang","render","ctx","PDFDocument","autoFirstPage","layoutDocument","layout","renderPDF","callOnRender","params","onRender","toBlob","stream","pipe","BlobStream","Promise","resolve","reject","on","blob","error","toBuffer","toString","result","buffer","Font","StyleSheet","create","s","queue","require","InternalBlobProvider","renderQueue","autostart","concurrency","state","url","loading","queueDocumentRender","onRenderFailed","setState","console","onRenderSuccessful","oldBlobUrl","URL","createObjectURL","revokeObjectURL","componentDidMount","componentDidUpdate","componentWillUnmount","end","React","PureComponent","BlobProvider","warn","PDFViewer","className","title","innerRef","PDFDownloadLink","fileName","downloadOnIE","window","navigator","msSaveBlob","throwEnvironmentError","name","Error","renderToStream","renderToString","renderToFile","version","primitives"],"mappings":"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"}