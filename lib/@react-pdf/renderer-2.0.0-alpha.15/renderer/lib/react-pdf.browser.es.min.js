import e from"@babel/runtime/helpers/extends";import n from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import r from"@babel/runtime/helpers/inheritsLoose";import t from"react";import*as o from"@react-pdf/primitives";export*from"@react-pdf/primitives";import i from"@babel/runtime/regenerator";import u from"@babel/runtime/helpers/asyncToGenerator";import c from"blob-stream";import a from"@react-pdf/font";import s from"@react-pdf/render";import l from"@react-pdf/pdfkit";import f from"@react-pdf/layout";import d from"react-reconciler";import{unstable_scheduleCallback as p,unstable_cancelCallback as m}from"scheduler";var h={},v=function(e){var r=e.onChange;return d({schedulePassiveEffects:p,cancelPassiveEffects:m,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:function(e,n){e.children.push(n)},createInstance:function(e,r){var t=r.style;r.children;return{type:e,box:{},style:t||{},props:n(r,["style","children"])||{},children:[]}},createTextInstance:function(e,n){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,n,r){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},prepareUpdate:function(e,n,r,t){return!function e(n,r){var t=Object.keys(n),o=Object.keys(r);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i+=1){var u=t[i];if("render"===u&&!n[u]!=!r[u])return!1;if("children"!==u&&n[u]!==r[u]){if("object"==typeof n[u]&&"object"==typeof r[u]&&e(n[u],r[u]))continue;return!1}if("children"===u&&("string"==typeof n[u]||"string"==typeof r[u]))return n[u]===r[u]}return!0}(r,t)},resetAfterCommit:void 0===r?function(){}:r,resetTextContent:function(e){},getRootHostContext:function(){return h},getChildHostContext:function(){return h},shouldSetTextContent:function(e,n){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(e,n){e.children.push(n)},appendChildToContainer:function(e,n){"ROOT"===e.type?e.document=n:e.children.push(n)},insertBefore:function(e,n,r){var t=e.children.indexOf(r);-1!==t&&n&&e.children.splice(t,0,n)},removeChild:function(e,n){var r=e.children.indexOf(n);-1!==r&&e.children.splice(r,1)},removeChildFromContainer:function(e,n){var r=e.children.indexOf(n);-1!==r&&e.children.splice(r,1)},commitTextUpdate:function(e,n,r){e.value=r},commitUpdate:function(e,r,t,o,i){var u=i.style,c=n(i,["style"]);e.props=c,e.style=u}})},b="2.0.0-alpha.15",y=new a,g=function(e){var n=e.initialValue,r=e.onChange,t={type:"ROOT",document:null,lang:"en-US"},o=v({onChange:r}),a=o.createContainer(t),d=function(e){o.updateContainer(e,a,null)};n&&d(n);var p=function(){var e=u(i.mark(function e(){var n,r;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l({autoFirstPage:!1,lang:(o=void 0,o=t.document,o.props?o.props.lang:null)}),e.next=3,f(t.document,y);case 3:return r=e.sent,e.abrupt("return",s(n,r));case 5:case"end":return e.stop()}var o},e)}));return function(){return e.apply(this,arguments)}}(),m=function(e){void 0===e&&(e={}),t.document.props.onRender&&t.document.props.onRender(e)};return{container:t,toBlob:function(){var e=u(i.mark(function e(){var n,r;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return n=e.sent,r=n.pipe(c()),e.abrupt("return",new Promise(function(e,n){r.on("finish",function(){try{var t=r.toBlob("application/pdf");m({blob:t}),e(t)}catch(e){n(e)}}),r.on("error",n)}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),toBuffer:function(){var e=u(i.mark(function e(){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(),e.abrupt("return",p());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),toString:function(){var e=u(i.mark(function e(){var n,r;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,p();case 3:return r=e.sent,e.abrupt("return",new Promise(function(e,t){try{r.on("data",function(e){n+=e}),r.on("end",function(){e(n)})}catch(e){t(e)}}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),updateContainer:d}},w=y,C={create:function(e){return e}},x=require("queue"),R=function(e){function n(){for(var n,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return(n=e.call.apply(e,[this].concat(t))||this).renderQueue=x({autostart:!0,concurrency:1}),n.state={blob:null,url:null,loading:!0,error:null},n.queueDocumentRender=function(){n.renderQueue.splice(0,n.renderQueue.length,function(){return n.state.error?Promise.resolve():n.instance.toBlob()})},n.onRenderFailed=function(e){n.setState({error:e}),console.error(e)},n.onRenderSuccessful=function(e){var r=n.state.url;n.setState({blob:e,url:URL.createObjectURL(e),loading:!1},function(){return URL.revokeObjectURL(r)})},n}r(n,e);var t=n.prototype;return t.componentDidMount=function(){this.instance=g({onChange:this.queueDocumentRender}),this.instance.updateContainer(this.props.document),this.renderQueue.on("error",this.onRenderFailed),this.renderQueue.on("success",this.onRenderSuccessful)},t.componentDidUpdate=function(){this.instance.updateContainer(this.props.document)},t.componentWillUnmount=function(){this.renderQueue.end()},t.render=function(){return this.props.children(this.state)},n}(t.PureComponent),S=function(e){var n=e.document,r=e.children;return n?t.createElement(R,{document:n},r):(console.warn("You should pass a valid document to BlobProvider"),null)},T=function(r){var o=r.className,i=r.style,u=r.title,c=r.children,a=r.innerRef,s=n(r,["className","style","title","children","innerRef"]);return t.createElement(R,{document:c},function(n){var r=n.url;return t.createElement("iframe",e({src:r,title:u,ref:a,style:i,className:o},s))})},P=function(e){var n=e.document,r=e.className,o=e.style,i=e.children,u=e.fileName,c=void 0===u?"document.pdf":u;if(!n)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return t.createElement(R,{document:n},function(e){return t.createElement("a",{style:o,href:e.url,download:c,className:r,onClick:(n=e.blob,function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(n,c)})},"function"==typeof i?i(e):i);var n})},k=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},F=function(){k("renderToStream")},O=function(){k("renderToString")},D=function(){k("renderToFile")},E=function(){k("render")};export default e({pdf:g,Font:w,version:"2.0.0-alpha.15",StyleSheet:C,PDFViewer:T,BlobProvider:S,PDFDownloadLink:P,renderToStream:F,renderToString:O,renderToFile:D,render:E},o);export{S as BlobProvider,w as Font,P as PDFDownloadLink,T as PDFViewer,C as StyleSheet,g as pdf,E as render,D as renderToFile,F as renderToStream,O as renderToString,b as version};
//# sourceMappingURL=react-pdf.browser.es.min.js.map
